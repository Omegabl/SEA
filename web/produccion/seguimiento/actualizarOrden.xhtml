<!DOCTYPE html>
<html lang="es"
	  xmlns="http://www.w3.org/1999/xhtml"
	  xmlns:h="http://xmlns.jcp.org/jsf/html"
	  xmlns:pt="http://xmlns.jcp.org/jsf/passthrough"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	  xmlns:f="http://xmlns.jcp.org/jsf/core"
	  xmlns:p="http://primefaces.org/ui">
	<h:head>
		<title>Actualizar orden de producción | SEA</title>
		<ui:composition template="/templates/resources.xhtml" />
	</h:head>
	<h:body>
		<!--{observacionesOrdenProduccionController.obtenerDatosOP(op)}-->
        <div class="mdl-layout mdl-js-layout">
			<ui:composition template="/templates/header.xhtml" />
			<main class="mdl-layout__content">
				<div class="page-content">
					<div class="mdl-grid">
						<div class="mdl-cell mdl-cell--12-col-desktop mdl-cell--8-col-tablet mdl-cell--4-col-phone">
							<h1 class="mdl-typography--display-1">Detalles de la orden No. #{observacionesOrdenProduccionController.ordenProduccion.idOrdenProduccion}</h1>
							<h3 class="mdl-typography--headline">Fecha de envío: <h:outputText value="#{observacionesOrdenProduccionController.ordenProduccion.fechaExpedicion}">
									<f:convertDateTime locale="es_CO" dateStyle="long" />
								</h:outputText></h3>
						</div>
						<h:form class="mdl-grid mdl-cell mdl-cell--12-col-desktop mdl-cell--8-col-tablet mdl-cell--4-col-phone" id="formSeguimiento">
							<div class="mdl-grid mdl-cell mdl-cell--6-col-desktop mdl-cell--4-col-tablet mdl-cell--4-col-phone">
								<h6 class="mdl-cell mdl-cell--12-col-desktop mdl-cell--8-col-tablet mdl-cell--4-col-phone mdl-typography--title">Detalles del cliente</h6>
								<div class="mdl-grid mdl-cell mdl-cell--6-col-desktop mdl-cell--4-col-tablet mdl-cell--4-col-phone">
									<div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
										<h:inputText class="mdl-textfield__input" id="cliente" pt:disabled="disabled" value="#{observacionesOrdenProduccionController.ordenProduccion.tblCotizacionNumeroCotizacion.tblClienteIdCliente.nombreORazonSocial} #{observacionesOrdenProduccionController.ordenProduccion.tblCotizacionNumeroCotizacion.tblClienteIdCliente.apellido}" />
										<h:outputLabel class="mdl-textfield__label" for="cliente">Cliente</h:outputLabel>
									</div>
								</div>
								<div class="mdl-grid mdl-cell mdl-cell--6-col-desktop mdl-cell--4-col-tablet mdl-cell--4-col-phone">
									<div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
										<h:inputText class="mdl-textfield__input" id="ciudad" pt:disabled="disabled" value="#{observacionesOrdenProduccionController.ordenProduccion.ciudadExpedicion}" />
										<h:outputLabel class="mdl-textfield__label" for="ciudad">Ciudad</h:outputLabel>
									</div>
								</div>
								<div class="mdl-grid mdl-cell mdl-cell--6-col-desktop mdl-cell--4-col-tablet mdl-cell--4-col-phone">
									<div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
										<h:inputText class="mdl-textfield__input" id="telefono" pt:disabled="disabled" value="" />
										<h:outputLabel class="mdl-textfield__label" for="telefono">Teléfono</h:outputLabel>
									</div>
								</div>
								<div class="mdl-grid mdl-cell mdl-cell--6-col-desktop mdl-cell--4-col-tablet mdl-cell--4-col-phone">
									<div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
										<h:inputText class="mdl-textfield__input" id="direccion" pt:disabled="disabled" value="" />
										<h:outputLabel class="mdl-textfield__label" for="direccion">Dirección de entrega</h:outputLabel>
									</div>
								</div>
								<div class="mdl-grid mdl-cell mdl-cell--6-col-desktop mdl-cell--4-col-tablet mdl-cell--4-col-phone">
									<div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
										<h:inputText class="mdl-textfield__input" id="asesor" pt:disabled="disabled" value="#{observacionesOrdenProduccionController.ordenProduccion.tblCotizacionNumeroCotizacion.tblClienteIdCliente.tblUsuarioIdUsuario.nombre} #{observacionesOrdenProduccionController.ordenProduccion.tblCotizacionNumeroCotizacion.tblClienteIdCliente.tblUsuarioIdUsuario.apellido}" />
										<h:outputLabel class="mdl-textfield__label" for="asesor">Asesor</h:outputLabel>
									</div>
								</div>
								<div class="mdl-grid mdl-cell mdl-cell--6-col-desktop mdl-cell--4-col-tablet mdl-cell--4-col-phone">
									<div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
										<h:inputText class="mdl-textfield__input" pt:type="date" id="fechaEntrega" value="#{observacionesOrdenProduccionController.ordenProduccion.fechaEntregaFinal}">
											<f:convertDateTime pattern="dd/MM/yyyy" />
										</h:inputText>
										<h:outputLabel class="mdl-textfield__label" for="fechaEntrega">Fecha de entrega</h:outputLabel>
									</div>
								</div>
							</div>
							<div class="mdl-grid mdl-cell mdl-cell--6-col-desktop mdl-cell--4-col-tablet mdl-cell--4-col-phone">
								<h6 class="mdl-cell mdl-cell--12-col-desktop mdl-cell--8-col-tablet mdl-cell--4-col-phone mdl-typography--title">Detalles de la OP</h6>
								<div class="mdl-grid mdl-cell mdl-cell--6-col-desktop mdl-cell--4-col-tablet mdl-cell--4-col-phone">
									<div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
										<h:outputLabel class="mdl-textfield__label" for="NoOrden">Número de orden</h:outputLabel>
										<p:selectOneMenu value="#{observacionesOrdenProduccionController.idOP}" filter="true" filterMatchMode="contains" id="NoOrden">
											<p:ajax listener="#{observacionesOrdenProduccionController.obtenerDatosOP()}" update="cliente, ciudad, telefono, direccion, asesor, fechaEntrega, fechaEnvioOC, facturado, fechaEntrega1, fechaEntrega2, observaciones, procesos"/>
											<f:selectItem itemValue="" itemLabel="Seleccione" />
											<f:selectItems value="#{observacionesOrdenProduccionController.listaOrdenesProduccion}" var="op" itemLabel="#{op.idOrdenProduccion}" itemValue="#{op.idOrdenProduccion}"/>
										</p:selectOneMenu>
									</div>
								</div>
								<div class="mdl-grid mdl-cell mdl-cell--6-col-desktop mdl-cell--4-col-tablet mdl-cell--4-col-phone">
									<div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
										<h:inputText class="mdl-textfield__input" pt:type="date" id="fechaEnvioOC" pt:disabled="disabled" value="#{observacionesOrdenProduccionController.ordenProduccion.tblCotizacionNumeroCotizacion.fechaEmision}">
											<f:convertDateTime pattern="dd/MM/yyyy" />
										</h:inputText>
										<h:outputLabel class="mdl-textfield__label" for="fechaEnvioOC">Fecha de envio de cotización</h:outputLabel>
									</div>
								</div>
								<div class="mdl-grid mdl-cell mdl-cell--6-col-desktop mdl-cell--4-col-tablet mdl-cell--4-col-phone">
									<div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
										<h:inputText class="mdl-textfield__input" id="facturado" value="#{observacionesOrdenProduccionController.ordenProduccion.tblCotizacionNumeroCotizacion.fechaFacturacion}">
											<f:convertDateTime pattern="dd/MM/yyyy" />
										</h:inputText>
										<h:outputLabel class="mdl-textfield__label" for="facturado">Fecha de facturación</h:outputLabel>
									</div>
								</div>
								<div class="mdl-grid mdl-cell mdl-cell--6-col-desktop mdl-cell--4-col-tablet mdl-cell--4-col-phone">
									<div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
										<h:inputText class="mdl-textfield__input" pt:type="date" id="fechaEntrega1" value="#{observacionesOrdenProduccionController.ordenProduccion.fechaEntrega1}">
											<f:convertDateTime pattern="dd/MM/yyyy" />
										</h:inputText>
										<h:outputLabel class="mdl-textfield__label" for="fechaEntrega1">Fecha de entrega 1</h:outputLabel>
									</div>
								</div>
								<div class="mdl-grid mdl-cell mdl-cell--6-col-desktop mdl-cell--4-col-tablet mdl-cell--4-col-phone">
									<div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
										<h:inputText class="mdl-textfield__input" pt:type="date" id="fechaEntrega2" value="#{observacionesOrdenProduccionController.ordenProduccion.fechaEntrega2}">
											<f:convertDateTime pattern="dd/MM/yyyy" />
										</h:inputText>
										<h:outputLabel class="mdl-textfield__label" for="fechaEntrega2">Fecha de entrega 2</h:outputLabel>
									</div>
								</div>
								<div class="mdl-grid mdl-cell mdl-cell--6-col-desktop mdl-cell--4-col-tablet mdl-cell--4-col-phone">
									<div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
										<h:inputText class="mdl-textfield__input" id="valorContrato" pt:disabled="disabled" value="" />
										<h:outputLabel class="mdl-textfield__label" for="valorContrato">Valor del contrato</h:outputLabel>
									</div>
								</div>
							</div>
							<div class="mdl-cell mdl-cell--12-col-desktop mdl-cell--8-col-tablet mdl-cell--4-col-phone">
								<div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
									<h:inputTextarea class="mdl-textfield__input" id="observaciones" value="#{observacionesOrdenProduccionController.ordenProduccion.observaciones}"></h:inputTextarea>
									<h:outputLabel class="mdl-textfield__label" for="observaciones">Observaciones</h:outputLabel>
								</div>
							</div>
							<section class="mdl-cell mdl-cell--12-col-desktop mdl-cell--8-col-tablet mdl-cell--4-col-phone">
								<div class="mdl-tabs mdl-js-tabs mdl-js-ripple-effect">
									<div class="mdl-tabs__tab-bar">
										<a href="#seguimiento" class="mdl-tabs__tab is-active">Historial de la orden</a>
										<a href="#listaProductos" class="mdl-tabs__tab">Lista de productos</a>
									</div>
									<div class="mdl-tabs__panel is-active" id="seguimiento">
										<div class="mdl-grid">
											<div class="buttons">
												<p:commandLink type="button" onclick="PF('opprocess').show();" styleClass="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--accent toggleSubForm">Agregar Proceso</p:commandLink>
											</div>
											<div class="mdl-cell mdl-cell--12-col-desktop mdl-cell--8-col-tablet mdl-cell--4-col-phone">
												<h:dataTable id="procesos" var="proceso" value="#{observacionesOrdenProduccionController.observacionesRegistradas}" class="mdl-data-table mdl-js-data-table mdl-shadow--2dp" headerClass="mdl-data-table__cell--non-numeric" columnClasses="mdl-data-table__cell--non-numeric, mdl-data-table__cell--non-numeric">
													<h:column>
														<f:facet name="header">
															<h:outputLabel value="Fecha"/>
														</f:facet>
														<h:outputText value="#{proceso.fechaObservacion}">
															<f:convertDateTime pattern="dd/MM/yyyy" />
														</h:outputText>
													</h:column>
													<h:column>
														<f:facet name="header">
															<h:outputLabel value="Proceso realizado"/>
														</f:facet>
														<h:outputText value="#{proceso.descripcion}" />
													</h:column>
												</h:dataTable>
											</div>
										</div>
									</div>
									<div class="mdl-tabs__panel" id="listaProductos">
										<div class="mdl-grid">
											<table id="articulosOp" class="mdl-cell mdl-cell--12-col-desktop mdl-cell--8-col-tablet mdl-cell--4-col-phone mdl-data-table mdl-js-data-table mdl-shadow--2dp">
												<thead>
													<tr>
														<th class="mdl-data-table__cell--non-numeric">Referencia</th>
														<th class="mdl-data-table__cell--non-numeric">Fabricante</th>
														<th class="mdl-data-table__cell--non-numeric">Diseño</th>
														<th>Talla</th>
														<th>Cantidad</th>
													</tr>
												</thead>
												<tbody>
													<tr>
														<td class="mdl-data-table__cell--non-numeric">1912</td>
														<td class="mdl-data-table__cell--non-numeric">Full Dotaciones</td>
														<td class="mdl-data-table__cell--non-numeric">Mujer Beige</td>
														<td>S</td>
														<td>10</td>
													</tr>
												</tbody>
											</table>
										</div>
									</div>
								</div>
							</section>
							<div class="mdl-cell mdl-cell--12-col-desktop mdl-cell--8-col-tablet mdl-cell--4-col-phone buttons">
								<p:commandButton styleClass="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--accent notificacion" value="Actualizar seguimiento" actionListener="#{observacionesOrdenProduccionController.actualizarOrden()}"/>
								<p:commandButton styleClass="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--accent notificacion" value="Realizar entrega" actionListener="#{observacionesOrdenProduccionController.entregarOrden()}"/>
							</div>
						</h:form>
					</div>
					<p:dialog widgetVar="opprocess" id="dlg">
						<h:form class="mdl-dialog" id="process">
							<h3 class="mdl-dialog__title">Registrar novedad</h3>
							<div class="mdl-dialog__content">
								<div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
									<h:inputTextarea class="mdl-textfield__input" id="descripcionProceso" value="#{observacionesOrdenProduccionController.observacionesOP.descripcion}" pt:required="required" pt:maxlength="512" />
									<h:outputLabel class="mdl-textfield__label" for="descripcionProceso">Descripción del proceso</h:outputLabel>
								</div>
							</div>
							<div class="mdl-dialog__actions">
								<p:commandButton styleClass="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--accent" actionListener="#{observacionesOrdenProduccionController.agregarObservacion()}" value="Registrar proceso" oncomplete="PF('opprocess').hide();" update="formSeguimiento:procesos" />
								<p:commandButton styleClass="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect" value="Cancelar" oncomplete="PF('opprocess').hide();" />
							</div>
						</h:form>
					</p:dialog>
				</div>
			</main>
		</div>
	</h:body>
</html>